[#]: subject: "Introduction to Bash Scripting"
[#]: via: "https://itsfoss.com/bash-scripting-tutorial/"
[#]: author: "Abhishek Prakash https://itsfoss.com/author/abhishek/"
[#]: collector: "lujun9972"
[#]: translator: "ChatGPT"
[#]: reviewer: "wxy"
[#]: publisher: " "
[#]: url: " "

Bash è„šæœ¬ç¼–ç¨‹å…¥é—¨
=====

> åˆå­¦è€…ä»¬ï¼Œè®©æˆ‘ä»¬åœ¨è¿™ä¸ªå¤§å‹çš„æ•™ç¨‹ä¸­æ¥è®¤è¯†ä¸€ä¸‹ Bash è„šæœ¬ç¼–ç¨‹ã€‚

Shell æ˜¯ Linux çš„æ ¸å¿ƒéƒ¨åˆ†ï¼Œå®ƒå…è®¸ä½ ä½¿ç”¨å„ç§è¯¸å¦‚ `cd`ã€`ls`ã€`cat` ç­‰çš„å‘½ä»¤ä¸ Linux å†…æ ¸è¿›è¡Œäº¤äº’ã€‚

Bash æ˜¯ Linux ä¸Šä¼—å¤šå¯ç”¨çš„ Shell ä¸­çš„ä¸€ä¸ªã€‚è¿™äº› Shell ä¸»è¦çš„è¯­æ³•åŸºæœ¬ç›¸åŒï¼Œä½†å¹¶éå®Œå…¨ä¸€æ ·ã€‚Bash æ˜¯ç›®å‰æœ€å—æ¬¢è¿çš„ Shellï¼Œå¹¶åœ¨å¤§å¤šæ•° Linux å‘è¡Œç‰ˆä¸­è¢«è®¾ä¸ºé»˜è®¤ Shellã€‚

å½“ä½ æ‰“å¼€ä¸€ä¸ªç»ˆç«¯æˆ– SSH ä¼šè¯æ—¶ï¼Œå³ä½¿ä½ æ— æ³•çœŸåˆ‡åœ°çœ‹åˆ°å®ƒï¼Œä½ å…¶å®å·²ç»åœ¨è¿è¡Œç€ä¸€ä¸ª Shellã€‚

![][1]

å½“ä½ è¾“å…¥ä¸€ä¸ªå‘½ä»¤ï¼Œå®ƒä¼šè¢« Shell è§£é‡Šã€‚å¦‚æœå‘½ä»¤å’Œè¯­æ³•æ˜¯æ­£ç¡®çš„ï¼Œå®ƒå°±ä¼šè¢«æ‰§è¡Œï¼Œå¦åˆ™ä½ ä¼šçœ‹åˆ°ä¸€ä¸ªé”™è¯¯ã€‚

### å½“ä½ å¯ä»¥ç›´æ¥è¿è¡Œ Linux å‘½ä»¤æ—¶ï¼Œä¸ºä»€ä¹ˆè¿˜éœ€è¦ Bash è„šæœ¬ï¼Ÿ

ä½ å¯ä»¥ç›´æ¥åœ¨ç»ˆç«¯è¾“å…¥å‘½ä»¤ï¼Œå®ƒä»¬å°±ä¼šè¢«æ‰§è¡Œã€‚

```
$ echo "hello world"
hello world
```

å¹¶ä¸”ï¼ŒåŒæ ·çš„æ“ä½œä¹Ÿå¯ä»¥åœ¨è„šæœ¬ä¸­è¿›è¡Œï¼š

```
$ cat >> script.sh
#!/bin/bash

echo "hello world"
$ bash script.sh
hello world
```

é‚£ä¹ˆï¼Œä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦ Shell è„šæœ¬å‘¢ï¼Ÿå› ä¸ºä½ ä¸å¿…ä¸€éåˆä¸€éåœ°è¾“å…¥åŒä¸€ä¸ªå‘½ä»¤ï¼Œä½ åªéœ€è¿è¡Œ Shell è„šæœ¬å³å¯ã€‚

æ­¤å¤–ï¼Œå¦‚æœä½ çš„è„šæœ¬ä¸­æœ‰å¤æ‚çš„é€»è¾‘ï¼ŒæŠŠæ‰€æœ‰çš„å‘½ä»¤éƒ½è¾“å…¥åˆ°ç»ˆç«¯ä¸­å¯èƒ½å¹¶ä¸æ˜¯ä¸€ä¸ªå¥½ä¸»æ„ã€‚

ä¾‹å¦‚ï¼Œå¦‚æœä½ è¾“å…¥ä¸‹é¢çš„å‘½ä»¤ï¼Œå®ƒä¼šå¥æ•ˆï¼Œä½†è¿™å¹¶ä¸å®¹æ˜“ç†è§£ã€‚ä¸æ–­åœ°è¾“å…¥ç›¸åŒçš„å‘½ä»¤ï¼ˆç”šè‡³è¦åœ¨ Bash å†å²è®°å½•ä¸­æœç´¢ï¼‰ä¼šé€ æˆå›°æ‰°ã€‚

```
if [ $(whoami) = 'root' ]; then echo "root"; else echo "not root"; fi
```

ç›¸åï¼Œä½ å¯ä»¥æŠŠå‘½ä»¤æ”¾è¿› shell è„šæœ¬ä¸­ï¼Œè¿™æ ·å°±æ›´å®¹æ˜“ç†è§£å¹¶ä¸”å¯ä»¥è½»æ¾è¿è¡Œäº†ï¼š

```
#!/bin/bash

if [ $(whoami) = 'root' ]; then
    echo "You are root"
else
    echo "You are not root"
fi
```

è¿™è¿˜æ˜¯æ¯”è¾ƒç®€å•çš„æƒ…å†µã€‚å°è¯•æƒ³è±¡ä¸€ä¸‹ï¼Œä¸€ä¸ªå¤æ‚çš„è„šæœ¬å¯èƒ½æœ‰äº”åè¡Œæˆ–ä¸€ç™¾è¡Œï¼

### ä½ å°†ä¼šå­¦åˆ°ä»€ä¹ˆï¼Ÿ

åœ¨è¿™ä¸ª Bash è„šæœ¬æ•™ç¨‹ä¸­ï¼Œæœ‰ä¹ä¸ªéƒ¨åˆ†ã€‚ä½ å°†ä¼šå­¦åˆ°ï¼š

* åˆ›å»ºå¹¶è¿è¡Œä½ çš„ç¬¬ä¸€ä¸ª Bash Shell è„šæœ¬
* ä½¿ç”¨å˜é‡
* åœ¨ä½ çš„ Bash è„šæœ¬ä¸­ä¼ é€’å‚æ•°å’Œæ¥å—ç”¨æˆ·è¾“å…¥
* è¿›è¡Œæ•°å­¦è®¡ç®—
* æ“ä½œå­—ç¬¦ä¸²
* ä½¿ç”¨æ¡ä»¶è¯­å¥ï¼Œä¾‹å¦‚ `if-else`
* ä½¿ç”¨ `for`ã€`while` å’Œ `until` å¾ªç¯
* åˆ›å»ºå‡½æ•°

> ğŸ’¡ æ‰€æœ‰çš„éƒ¨åˆ†éƒ½ä¼šç»™ä½ ä¸€ä¸ªç®€å•çš„ä¾‹å­ã€‚å¦‚æœä½ æ„¿æ„ï¼Œä½ å¯ä»¥é€šè¿‡è®¿é—®æ¯ä¸ªéƒ¨åˆ†çš„è¯¦ç»†ç« èŠ‚æ¥æ›´æ·±å…¥åœ°å­¦ä¹ ã€‚è¿™äº›ç« èŠ‚ä¹Ÿéƒ½åŒ…å«äº†å®è·µç»ƒä¹ ã€‚

### è¿™ä¸ªæ•™ç¨‹çš„ç›®æ ‡è¯»è€…æ˜¯è°ï¼Ÿ

è¿™ä¸ªæ•™ç¨‹é€‚åˆä»»ä½•æƒ³è¦å¼€å§‹å­¦ä¹  Bash Shell è„šæœ¬çš„äººã€‚

å¦‚æœä½ æ˜¯ä¸€åå­¦ç”Ÿï¼Œè€Œä½ çš„è¯¾ç¨‹é‡ŒåŒ…æ‹¬äº† Shell è„šæœ¬ï¼Œé‚£ä¹ˆè¿™ä¸ªç³»åˆ—å°±æ˜¯ä¸ºä½ å‡†å¤‡çš„ã€‚

å¦‚æœä½ æ˜¯ä¸€ä¸ªå¸¸è§„çš„æ¡Œé¢ Linux ç”¨æˆ·ï¼Œè¿™ä¸ªç³»åˆ—å°†ä¼šå¸®åŠ©ä½ ç†è§£åœ¨æ¢ç´¢å„ç§è½¯ä»¶å’Œä¿®å¤é—®é¢˜æ—¶é‡åˆ°çš„å¤§å¤šæ•° Shell è„šæœ¬ã€‚ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨å®ƒæ¥è‡ªåŠ¨åŒ–ä¸€äº›å¸¸è§çš„ã€é‡å¤çš„ä»»åŠ¡ã€‚

åœ¨è¿™ä¸ª Bash è„šæœ¬æ•™ç¨‹ç»“æŸæ—¶ï¼Œä½ åº”è¯¥å¯ä»¥ç¼–å†™ç®€å•çš„ bash è„šæœ¬ã€‚

> ğŸš§ å¸Œæœ›ä½ å·²ç»æ‹¥æœ‰ Linux å‘½ä»¤è¡Œå’Œç¼–ç¨‹è¯­è¨€çš„åŸºç¡€çŸ¥è¯†ã€‚

å¦‚æœä½ å¯¹ Linux å‘½ä»¤è¡Œå®Œå…¨ä¸ç†Ÿæ‚‰ï¼Œæˆ‘å»ºè®®ä½ å…ˆæŒæ¡åŸºç¡€çŸ¥è¯†ã€‚

> **[19 ä¸ªä½ åº”è¯¥çŸ¥é“çš„åŸºç¡€è€Œé‡è¦çš„ Linux ç»ˆç«¯æŠ€å·§][1a]**

ä½ åº”è¯¥äº†è§£å¦‚ä½•åœ¨å‘½ä»¤è¡Œä¸­è¿›å…¥ç‰¹å®šçš„ä½ç½®ã€‚ä¸ºäº†åšåˆ°è¿™ä¸€ç‚¹ï¼Œä½ éœ€è¦ç†è§£ Linux æ–‡ä»¶ç³»ç»Ÿä¸­çš„è·¯å¾„æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚

> **[Linux ä¸­çš„ç»å¯¹è·¯å¾„å’Œç›¸å¯¹è·¯å¾„æœ‰ä»€ä¹ˆä¸åŒ][1b]**

æ¥ä¸‹æ¥ï¼Œè¿™ä¸ªæ•™ç¨‹ç³»åˆ—ä¼šç»™ä½ ä»‹ç»ç›®å½•å¯¼èˆªå’Œæ–‡ä»¶æ“ä½œçš„åŸºæœ¬çŸ¥è¯†ã€‚

> **[ç»ˆç«¯åŸºç¡€ï¼šLinux ç»ˆç«¯å…¥é—¨][1c]**

### 1ã€ç¼–å†™ä½ çš„ç¬¬ä¸€ä¸ª Bash Shell è„šæœ¬

åˆ›å»ºä¸€ä¸ªåä¸º `hello.sh` çš„æ–°æ–‡ä»¶ï¼š

```
nano hello.sh
```

è¿™å°†åœ¨ç»ˆç«¯ä¸­æ‰“å¼€ nano ç¼–è¾‘å™¨ã€‚åœ¨å…¶ä¸­è¾“å…¥ä»¥ä¸‹å‡ è¡Œä»£ç ï¼š

```
#!/bin/bash
echo "Hello World"
```

é€šè¿‡æŒ‰ `Ctrl+X` é”®å¯ä»¥ä¿å­˜å¹¶é€€å‡º nano ç¼–è¾‘å™¨ã€‚

ç°åœ¨ï¼Œä½ å¯ä»¥ä»¥ä»¥ä¸‹æ–¹å¼è¿è¡Œ Bash Shell è„šæœ¬ï¼š

```
bash hello.sh
```

ä½ åº”è¯¥å¯ä»¥çœ‹åˆ°ä»¥ä¸‹çš„è¾“å‡ºï¼š

```
Hello World
```

å¦ä¸€ç§æ–¹å¼æ˜¯é¦–å…ˆèµ‹äºˆè„šæœ¬æ‰§è¡Œæƒé™ï¼š

```
chmod u+x hello.sh
```

ç„¶åè¿™æ ·è¿è¡Œå®ƒï¼š

```
./hello.sh
```

> ğŸ’¡ ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨åŸºäºå›¾å½¢ç”¨æˆ·ç•Œé¢çš„æ–‡æœ¬ç¼–è¾‘å™¨æ¥ç¼–å†™è„šæœ¬ã€‚è¿™å¯èƒ½æ›´é€‚åˆç¼–å†™è¾ƒé•¿çš„è„šæœ¬ã€‚ç„¶è€Œï¼Œä½ éœ€è¦åˆ‡æ¢åˆ°ä¿å­˜è„šæœ¬çš„ç›®å½•ä¸­æ‰èƒ½è¿è¡Œå®ƒã€‚

æ­å–œï¼ä½ åˆšåˆšè¿è¡Œäº†ä½ çš„ç¬¬ä¸€ä¸ª Bash è„šæœ¬ã€‚

> [Bash åŸºç¡€çŸ¥è¯†ç³»åˆ— #1ï¼šåˆ›å»ºå¹¶è¿è¡Œä½ çš„ç¬¬ä¸€ä¸ª Bash Shell è„šæœ¬][1d]

### 2ã€åœ¨ Bash è„šæœ¬ä¸­ä½¿ç”¨å˜é‡

å˜é‡çš„å£°æ˜æ–¹å¼å¦‚ä¸‹ï¼š

```
var=some_value
```

ç„¶åå¯ä»¥åƒè¿™æ ·è®¿é—®å˜é‡ï¼š

```
$var
```

> ğŸš§ åœ¨å£°æ˜å˜é‡æ—¶ï¼Œç­‰å·ï¼ˆ`=`ï¼‰å‰åä¸èƒ½æœ‰ç©ºæ ¼ã€‚

æˆ‘ä»¬é€šè¿‡æ·»åŠ ä¸€ä¸ªå˜é‡æ¥ä¿®æ”¹å‰é¢çš„è„šæœ¬ã€‚

```
#!/bin/bash
message="Hello World"
echo $message
```

å¦‚æœè¿è¡Œè¿™ä¸ªè„šæœ¬ï¼Œè¾“å‡ºä»ç„¶ä¼šä¿æŒä¸å˜ã€‚

```
Hello World
```

> **[Bash åŸºç¡€çŸ¥è¯†ç³»åˆ— #2ï¼šåœ¨ Bash ä¸­ä½¿ç”¨å˜é‡][1e]**

### 3ã€å‘ Bash è„šæœ¬ä¼ é€’å‚æ•°

ä½ å¯ä»¥åœ¨è¿è¡Œ Bash è„šæœ¬æ—¶ä»¥ä»¥ä¸‹æ–¹å¼ä¼ é€’å‚æ•°ï¼š

```
./my_script.sh arg1 arg2
```

åœ¨è„šæœ¬ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨ `$1` æ¥ä»£è¡¨ç¬¬ 1 ä¸ªå‚æ•°ï¼Œç”¨ `$2` æ¥ä»£è¡¨ç¬¬ 2 ä¸ªå‚æ•°ï¼Œä»¥æ­¤ç±»æ¨ã€‚`$0` æ˜¯ä¸€ä¸ªç‰¹æ®Šå˜é‡ï¼Œå®ƒä»£è¡¨æ­£åœ¨è¿è¡Œçš„è„šæœ¬çš„åå­—ã€‚

ç°åœ¨ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„ shell è„šæœ¬ï¼Œå‘½åä¸º `arguments.sh`ï¼Œå¹¶å‘å…¶ä¸­æ·»åŠ ä»¥ä¸‹å‡ è¡Œä»£ç ï¼š

```
#!/bin/bash

echo "Script name is: $0"
echo "First argument is: $1"
echo "Second argument is: $2"
```

ä½¿å…¶å¯æ‰§è¡Œå¹¶åƒè¿™æ ·è¿è¡Œå®ƒï¼š

```
$ ./argument.sh abhishek prakash
Script name is: ./argument.sh
First argument is: abhishek
Second argument is: prakash
```

è®©æˆ‘ä»¬å¿«é€Ÿçœ‹ä¸€ä¸‹ç‰¹æ®Šå˜é‡ï¼š

ç‰¹æ®Šå˜é‡ | æè¿°
---|---
`$0` | è„šæœ¬åç§°
`$1`ã€`$2`...`$9` | è„šæœ¬å‚æ•°
`${n}` | 10 åˆ° 255 çš„è„šæœ¬å‚æ•°
`$#` | å‚æ•°æ•°é‡
`$@` | æ‰€æœ‰å‚æ•°ä¸€èµ·
`$$` | å½“å‰ shell çš„è¿›ç¨‹ id
`$!` | æœ€åæ‰§è¡Œå‘½ä»¤çš„è¿›ç¨‹ id
`$?` | æœ€åæ‰§è¡Œå‘½ä»¤çš„é€€å‡ºçŠ¶æ€

ä½ ä¹Ÿå¯ä»¥é€šè¿‡æ¥å—é”®ç›˜è¾“å…¥ä½¿ä½ çš„ Bash è„šæœ¬å˜å¾—äº¤äº’å¼ã€‚

ä¸ºæ­¤ï¼Œä½ å¿…é¡»ä½¿ç”¨ `read` å‘½ä»¤ã€‚ä½ è¿˜å¯ä»¥ä½¿ç”¨ `read -p` å‘½ä»¤æç¤ºç”¨æˆ·è¿›è¡Œé”®ç›˜è¾“å…¥ï¼Œè€Œä¸éœ€è¦ `echo` å‘½ä»¤ã€‚

```
#!/bin/bash

echo "What is your name, stranger?"
read name
read -p "What's your full name, $name? " full_name
echo "Welcome, $full_name"
```

ç°åœ¨ï¼Œå¦‚æœä½ è¿è¡Œè¿™ä¸ªè„šæœ¬ï¼Œå½“ç³»ç»Ÿæç¤ºä½ è¾“å…¥â€œå‚æ•°â€æ—¶ï¼Œä½ å¿…é¡»è¾“å…¥ã€‚

```
$ ./argument.sh
What is your name, stranger?
abhishek
What's your full name, abhishek? abhishek prakash
Welcome, abhishek prakash
```

> **[Bash åŸºç¡€çŸ¥è¯†ç³»åˆ— #3ï¼šä¼ é€’å‚æ•°å’Œæ¥å—ç”¨æˆ·è¾“å…¥][1f]**

### 4ã€æ‰§è¡Œç®—æœ¯è¿ç®—

åœ¨ Bash Shell ä¸­æ‰§è¡Œç®—æœ¯è¿ç®—çš„è¯­æ³•æ˜¯è¿™æ ·çš„ï¼š

```
$((arithmetic_operation))
```

ä¸‹é¢æ˜¯ä½ å¯ä»¥åœ¨ Bash ä¸­æ‰§è¡Œçš„ç®—æœ¯è¿ç®—çš„åˆ—è¡¨ï¼š

æ“ä½œç¬¦ | æè¿°
---|---
`+` | åŠ æ³•
`-` | å‡æ³•
`*` | ä¹˜æ³•
`/` | æ•´æ•°é™¤æ³•ï¼ˆæ²¡æœ‰å°æ•°ï¼‰
`%` | æ¨¡è¿ç®—ï¼ˆåªä½™ï¼‰
`**` | æŒ‡æ•°ï¼ˆa çš„ b æ¬¡æ–¹ï¼‰

ä»¥ä¸‹æ˜¯åœ¨ Bash è„šæœ¬ä¸­è¿›è¡ŒåŠ æ³•å’Œå‡æ³•çš„ç¤ºä¾‹ï¼š

```
#!/bin/bash

read -p "Enter first number: " num1
read -p "Enter second number: " num2

sum=$(($num1+$num2))
sub=$(($num1-$num2))
echo "The summation of $num1 and $num2 is $sum"
echo "The substraction of $num2 from $num1 is $sub"
```

ä½ å¯ä»¥æ‰§è¡Œ Shell è„šæœ¬ï¼Œä½¿ç”¨ä½ é€‰æ‹©çš„ä»»æ„æ•°å­—ä½œä¸ºå‚æ•°ã€‚

![][4]

å¦‚æœä½ å°è¯•é™¤æ³•ï¼Œä¼šå‡ºç°ä¸€ä¸ªå¤§é—®é¢˜ã€‚Bash åªä½¿ç”¨æ•´æ•°ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒæ²¡æœ‰å°æ•°çš„æ¦‚å¿µã€‚å› æ­¤ï¼Œä½ ä¼šå¾—åˆ° 10/3 çš„ç»“æœä¸º3ï¼Œè€Œä¸æ˜¯ 3.333ã€‚

å¯¹äºæµ®ç‚¹æ•°è¿ç®—ï¼Œä½ éœ€è¦è¿™æ ·ä½¿ç”¨ `bc` å‘½ä»¤ï¼š

```
#!/bin/bash

num1=50
num2=6

result=$(echo "$num1/$num2" | bc -l)

echo "The result is $result"
```

è¿™ä¸ªæ—¶å€™ï¼Œä½ å°†çœ‹åˆ°å‡†ç¡®çš„ç»“æœã€‚

```

    The result is 8.33333333333333333333

```

> **[Bash åŸºç¡€çŸ¥è¯†ç³»åˆ— #4ï¼šç®—æœ¯è¿ç®—][4a]**

### 5ã€åœ¨ Bash è„šæœ¬ä¸­ä½¿ç”¨æ•°ç»„

ä½ å¯ä»¥ä½¿ç”¨ Bash ä¸­çš„æ•°ç»„æ¥å­˜å‚¨åŒä¸€ç±»åˆ«çš„å€¼ï¼Œè€Œä¸æ˜¯ä½¿ç”¨å¤šä¸ªå˜é‡ã€‚

ä½ å¯ä»¥åƒè¿™æ ·å£°æ˜ä¸€ä¸ªæ•°ç»„ï¼š
 
```
distros=(Ubuntu Fedora SUSE "Arch Linux" Nix)
```

è¦è®¿é—®ä¸€ä¸ªå…ƒç´ ï¼Œä½¿ç”¨ï¼š

```
${array_name[N]}
```

åƒå¤§å¤šæ•°å…¶ä»–çš„ç¼–ç¨‹è¯­è¨€ä¸€æ ·ï¼Œæ•°ç»„çš„ç´¢å¼•ä» 0 å¼€å§‹ã€‚

ä½ å¯ä»¥åƒè¿™æ ·æ˜¾ç¤ºæ•°ç»„çš„æ‰€æœ‰å…ƒç´ ï¼š

```
${array[*]}
```

è¿™æ ·è·å–æ•°ç»„é•¿åº¦ï¼š

```
${#array_name[@]}
```

> **[Bash åŸºç¡€çŸ¥è¯†ç³»åˆ— #5ï¼šåœ¨ Bash ä¸­ä½¿ç”¨æ•°ç»„][4b]**

### 6ã€Bash ä¸­çš„åŸºç¡€å­—ç¬¦ä¸²æ“ä½œ

Bash èƒ½å¤Ÿæ‰§è¡Œè®¸å¤šå­—ç¬¦ä¸²æ“ä½œã€‚

ä½ å¯ä»¥ä½¿ç”¨è¿™ç§æ–¹å¼è·å–å­—ç¬¦ä¸²é•¿åº¦ï¼š

```
${#string}
```

è¿æ¥ä¸¤ä¸ªå­—ç¬¦ä¸²ï¼š

```
str3=$str1$str2
```

æä¾›å­å­—ç¬¦ä¸²çš„èµ·å§‹ä½ç½®å’Œé•¿åº¦æ¥æå–å­å­—ç¬¦ä¸²ï¼š

```
${string:$pos:$len}
```

è¿™é‡Œæœ‰ä¸€ä¸ªä¾‹å­ï¼š

![][5]

ä½ ä¹Ÿå¯ä»¥æ›¿æ¢ç»™å®šå­—ç¬¦ä¸²çš„ä¸€éƒ¨åˆ†ï¼š

```

${string/substr1/substr2}

```

å¹¶ä¸”ä½ ä¹Ÿå¯ä»¥ä»ç»™å®šå­—ç¬¦ä¸²ä¸­åˆ é™¤ä¸€ä¸ªå­å­—ç¬¦ä¸²ï¼š
```

    ${string/substring}

```

> **[Bash åŸºç¡€çŸ¥è¯†ç³»åˆ— #6ï¼šå¤„ç†å­—ç¬¦ä¸²æ“ä½œ][4c]**

### 7ã€åœ¨ Bash ä¸­ä½¿ç”¨æ¡ä»¶è¯­å¥

ä½ å¯ä»¥é€šè¿‡ä½¿ç”¨ `if` æˆ– `if-else` è¯­å¥ä¸ºä½ çš„ Bash è„šæœ¬æ·»åŠ æ¡ä»¶é€»è¾‘ã€‚è¿™äº›è¯­å¥ä»¥ `fi` ç»“æŸã€‚

å•ä¸ª `if` è¯­å¥çš„è¯­æ³•æ˜¯ï¼š

```
if [ condition ]; then
  your code
fi
```

æ³¨æ„ä½¿ç”¨ `[ ... ];` å’Œ `then` ã€‚

`if-else` è¯­å¥çš„è¯­æ³•æ˜¯ï¼š

```
if [ expression ]; then
    ## execute this block if condition is true else go to next
elif [ expression ]; then
    ## execute this block if condition is true else go to next
else
    ## if none of the above conditions are true, execute this block
fi
```

è¿™é‡Œæœ‰ä¸€ä¸ªä½¿ç”¨ `if-else` è¯­å¥çš„ Bash è„šæœ¬ç¤ºä¾‹ï¼š

```
#!/bin/bash

read -p "Enter the number: " num
mod=$(($num%2))

if [ $mod -eq 0 ]; then
    echo "Number $num is even"
else
    echo "Number $num is odd"
fi
```

è¿è¡Œå®ƒï¼Œä½ åº”è¯¥èƒ½çœ‹åˆ°è¿™æ ·çš„ç»“æœï¼š

![][6]

`-eq` è¢«ç§°ä¸ºæµ‹è¯•æ¡ä»¶æˆ–æ¡ä»¶æ“ä½œç¬¦ã€‚æœ‰è®¸å¤šè¿™æ ·çš„æ“ä½œç¬¦å¯ä»¥ç»™ä½ ä¸åŒç±»å‹çš„æ¯”è¾ƒï¼š

è¿™äº›æ˜¯ä½ å¯ä»¥ç”¨æ¥è¿›è¡Œæ•°å€¼æ¯”è¾ƒçš„æµ‹è¯•æ¡ä»¶æ“ä½œç¬¦ï¼š

æ¡ä»¶ | å½“...æ—¶ï¼Œç­‰åŒäº true
---|---
`$a -lt $b` | `$a < $b` ï¼ˆ`$a` æ˜¯å°äº `$b`ï¼‰ 
`$a -gt $b` | `$a > $b` ï¼ˆ`$a` æ˜¯å¤§äº `$b`ï¼‰
`$a -le $b` | `$a <= $b` ï¼ˆ`$a` æ˜¯å°äºæˆ–ç­‰äº `$b`ï¼‰ 
`$a -ge $b` | `$a >= $b` ï¼ˆ`$a` æ˜¯å¤§äºæˆ–ç­‰äº `$b`ï¼‰
`$a -eq $b` | `$a == $b` ï¼ˆ`$a` ç­‰äº `$b`ï¼‰
`$a -ne $b` | `$a != $b` ï¼ˆ`$a` ä¸ç­‰äº `$b`ï¼‰

å¦‚æœä½ åœ¨è¿›è¡Œå­—ç¬¦ä¸²æ¯”è¾ƒï¼Œä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹è¿™äº›æµ‹è¯•æ¡ä»¶ï¼š

æ¡ä»¶ | å½“...æ—¶ï¼Œç­‰åŒäº true
---|---
`"$a" = "$b"` | `$a` ç­‰åŒäº `$b`
`"$a" == "$b"` | `$a` ç­‰åŒäº `$b`
`"$a" != "$b"` | `$a` ä¸åŒäº `$b`
`-z "$a"` | `$a` æ˜¯ç©ºçš„

è¿˜æœ‰äº›æ¡ä»¶ç”¨äºæ£€æŸ¥æ–‡ä»¶ç±»å‹ï¼š

æ¡ä»¶ | å½“...æ—¶ï¼Œç­‰åŒäº true
---|---
`-f $a` | `$a` æ˜¯ä¸€ä¸ªæ–‡ä»¶
`-d $a` | `$a` æ˜¯ä¸€ä¸ªç›®å½•
`-L $a` | `$a` æ˜¯ä¸€ä¸ªé“¾æ¥

> ğŸš§ è¦ç‰¹åˆ«æ³¨æ„ç©ºæ ¼ã€‚å¼€æ‹¬å·å’Œé—­æ‹¬å·ã€æ¡ä»¶ä¹‹é—´å¿…é¡»æœ‰ç©ºæ ¼ã€‚åŒæ ·åœ°ï¼Œæ¡ä»¶æ“ä½œç¬¦ï¼ˆ`-le`ã€`==` ç­‰ï¼‰ä¹‹å‰å’Œä¹‹åå¿…é¡»æœ‰ç©ºæ ¼ã€‚

> **[Bash åŸºç¡€çŸ¥è¯†ç³»åˆ— #7ï¼šIf Else è¯­å¥][6a]**

### 8ã€ä½¿ç”¨ bash è„šæœ¬ä¸­çš„å¾ªç¯

Bash æ”¯æŒä¸‰ç§ç±»å‹çš„å¾ªç¯ï¼š`for`ã€`while` å’Œ `until`ã€‚

è¿™æ˜¯ `for` å¾ªç¯çš„ä¸€ä¸ªä¾‹å­ï¼š

```
#!/bin/bash

for num in {1..10}; do
    echo $num
done
```

è¿è¡Œå®ƒï¼Œä½ å°†çœ‹åˆ°ä»¥ä¸‹è¾“å‡ºï¼š
```
1
2
3
4
5
6
7
8
9
10
```

å¦‚æœä½ é€‰æ‹©ä½¿ç”¨ä¸Šé¢çš„ç¤ºä¾‹ï¼Œå¯ä»¥ä½¿ç”¨ `while` å¾ªç¯è¿™æ ·é‡å†™ï¼š

```
#!/bin/bash

num=1
while [ $num -le 10 ]; do
    echo $num
    num=$(($num+1))
done
```

åŒæ ·ï¼Œå¯ä»¥ä½¿ç”¨ `until` å¾ªç¯æ¥é‡å†™ï¼š

```
#!/bin/bash

num=1
until [ $num -gt 10 ]; do
    echo $num
    num=$(($num+1))
done
```

> ğŸ’¡ `while` å¾ªç¯å’Œ `until` å¾ªç¯éå¸¸ç›¸ä¼¼ã€‚åŒºåˆ«åœ¨äºï¼š`while` å¾ªç¯åœ¨æ¡ä»¶ä¸ºçœŸæ—¶è¿è¡Œï¼Œè€Œ `until` å¾ªç¯åœ¨æ¡ä»¶ä¸ºå‡æ—¶è¿è¡Œã€‚

> [Bash åŸºç¡€çŸ¥è¯†ç³»åˆ— #8ï¼šforã€while å’Œ until å¾ªç¯][6b]
 
### 9ã€åœ¨ bash è„šæœ¬ä¸­ä½¿ç”¨å‡½æ•°

Bash Shell æ”¯æŒä½¿ç”¨å‡½æ•°ï¼Œè¿™æ ·ä½ ä¸å¿…åå¤ç¼–å†™ç›¸åŒçš„ä»£ç ç‰‡æ®µã€‚

è¿™æ˜¯å£°æ˜ Bash å‡½æ•°çš„é€šç”¨è¯­æ³•ï¼š

```
function_name() {
  commands
}
```

è¿™æ˜¯ä¸€ä¸ªä½¿ç”¨å¸¦å‚æ•°çš„å‡½æ•°çš„ Bash è„šæœ¬æ ·ä¾‹ï¼š

```
#!/bin/bash

sum() {
    sum=$(($1+$2))
    echo "The sum of $1 and $2 is: $sum"
}

echo "Let's use the sum function"
sum 1 5
```

å¦‚æœä½ è¿è¡Œè¯¥è„šæœ¬ï¼Œä½ å°†çœ‹åˆ°ä»¥ä¸‹è¾“å‡ºï¼š

```
Let's use the sum function
The sum of 1 and 5 is: 6
```

> [Bash åŸºç¡€çŸ¥è¯†ç³»åˆ— #9ï¼šå‡½æ•°][6c]
 
### æ¥ä¸‹æ¥å»å“ªé‡Œï¼Ÿ

è¿™åªæ˜¯ä¸€ä¸ªåˆçª¥ã€‚è¿™ä¸ª Bash è„šæœ¬æ•™ç¨‹åªæ˜¯ä¸€ç¯‡å¼•è¨€ã€‚Bash è„šæœ¬çš„å†…å®¹è¿˜æœ‰å¾ˆå¤šï¼Œä½ å¯ä»¥æ…¢æ…¢åœ°ã€é€æ¸åœ°æ¢ç´¢ã€‚

GNU Bash å‚è€ƒæ˜¯ä¸€ä»½ä¼˜ç§€çš„åœ¨çº¿èµ„æºï¼Œå¯ä»¥è§£ç­”ä½ çš„ bash ç–‘é—®ã€‚

> **[GNU Bash å‚è€ƒ][7]**

### é™¤æ­¤ä¹‹å¤–ï¼Œä½ å¯ä»¥ä¸‹è½½è¿™æœ¬å…è´¹ä¹¦ç±æ¥å­¦ä¹ æ›´å¤šåœ¨æ­¤æœªæ¶µç›–çš„ bash å†…å®¹ï¼š

> **[ä¸‹è½½ Bash åˆå­¦è€…æŒ‡å—][8]**

ä¸€æ—¦ä½ å…·æœ‰è¶³å¤Ÿçš„ bash åŸºç¡€çŸ¥è¯†ï¼Œä½ å¯ä»¥é€šè¿‡è¿™æœ¬å…è´¹ä¹¦ç±æ¥å­¦ä¹ é«˜çº§ bash è„šæœ¬ï¼š

> **[ä¸‹è½½é«˜çº§ Bash ç¼–ç¨‹æŒ‡å—][9]**

è¿™ä¸¤æœ¬ä¹¦è‡³å°‘éƒ½æœ‰åå¹´çš„å†å²ï¼Œä½†ä½ ä»ç„¶å¯ä»¥ä½¿ç”¨å®ƒä»¬æ¥å­¦ä¹  Bashã€‚

ğŸ’¬ å¸Œæœ›ä½ å–œæ¬¢è¿™ä¸ªä½œä¸ºå­¦ä¹  Bash è„šæœ¬èµ·ç‚¹çš„æ•™ç¨‹ã€‚è¯·åœ¨è¯„è®ºåŒºæä¾›ä½ çš„åé¦ˆã€‚

--------------------------------------------------------------------------------

via: https://itsfoss.com/bash-scripting-tutorial/

ä½œè€…ï¼š[Abhishek Prakash][a]
é€‰é¢˜ï¼š[lujun9972][b]
è¯‘è€…ï¼šChatGPT
æ ¡å¯¹ï¼š[wxy](https://github.com/wxy)

æœ¬æ–‡ç”± [LCTT](https://github.com/LCTT/TranslateProject) åŸåˆ›ç¼–è¯‘ï¼Œ[Linuxä¸­å›½](https://linux.cn/) è£èª‰æ¨å‡º

[a]: https://itsfoss.com/author/abhishek/
[b]: https://github.com/lujun9972
[1]: https://itsfoss.com/content/images/wordpress/2021/12/linux-terminal-introduction.png
[1a]: https://itsfoss.com/basic-terminal-tips-ubuntu/
[1b]: https://linuxhandbook.com/absolute-vs-relative-path/
[1c]: https://linux.cn/article-16104-1.html
[1d]: https://linux.cn/article-15921-1.html
[1e]: https://linux.cn/article-15991-1.html
[1f]: https://linux.cn/article-16001-1.html
[2]: https://itsfoss.com/content/images/size/w256h256/2022/12/android-chrome-192x192.png
[3]: https://linuxhandbook.com/content/images/size/w256h256/2021/08/Linux-Handbook-New-Logo.png
[4]: https://itsfoss.com/content/images/2023/07/addition-substraction-bash-script.png
[4a]: https://linux.cn/article-16006-1.html
[4b]: https://linux.cn/article-16016-1.html
[4c]: https://linux.cn/article-16047-1.html
[5]: https://itsfoss.com/content/images/2023/07/extract-substring-bash.png
[6]: https://itsfoss.com/content/images/2023/07/bash-if-else-example.png
[6a]: https://linux.cn/article-16083-1.html
[6b]: https://itsfoss.com/bash-loops/
[6c]: https://itsfoss.com/bash-function/
[7]: https://www.gnu.org/software/bash/manual/bash.html
[8]: https://tldp.org/LDP/Bash-Beginners-Guide/Bash-Beginners-Guide.pdf
[9]: https://tldp.org/LDP/abs/abs-guide.pdf
