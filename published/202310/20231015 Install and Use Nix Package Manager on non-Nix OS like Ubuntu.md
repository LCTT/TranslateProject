[#]: subject: "Install and Use Nix Package Manager on non-Nix OS like Ubuntu"
[#]: via: "https://itsfoss.com/ubuntu-install-nix-package-manager/"
[#]: author: "Sagar Sharma https://itsfoss.com/author/sagar/"
[#]: collector: "lujun9972/lctt-scripts-1693450080"
[#]: translator: "geekpi"
[#]: reviewer: "wxy"
[#]: publisher: "wxy"
[#]: url: "https://linux.cn/article-16307-1.html"

åœ¨ Ubuntu ç­‰é Nix æ“ä½œç³»ç»Ÿä¸Šå®‰è£…å’Œä½¿ç”¨ Nix åŒ…ç®¡ç†å™¨
======

![][0]

> Nix è½¯ä»¶åŒ…ç®¡ç†å™¨å¯ä»¥å®‰è£…åœ¨ä»»ä½• Linux å‘è¡Œç‰ˆä¸Šã€‚å…·ä½“æ–¹æ³•å¦‚ä¸‹ã€‚

[äººä»¬å–œæ¬¢ä½¿ç”¨ä¸å¯å˜çš„ NixOS][1] çš„åŸå› ä¹‹ä¸€æ˜¯å®ƒçš„ Nix åŒ…ç®¡ç†å™¨ã€‚

å®ƒæœ‰è¶…è¿‡ 80,000 ä¸ªè½¯ä»¶åŒ…ï¼Œè¿™å¯èƒ½ä¸ Debian è½¯ä»¶åŒ…çš„æ•°é‡ç›¸å·®æ¯”è¾ƒå¤§ï¼Œä½†ä»ç„¶ä»¤äººå°è±¡æ·±åˆ»ã€‚

å¥½å¤„æ˜¯ä½ ä¸å¿…ä»…ä»…ä¸ºäº†åŒ…ç®¡ç†å™¨è€Œ [å®‰è£… NixOS][2]ã€‚ä¸ [Homebrew][3] å’Œ Rust çš„ [Cargo åŒ…ç®¡ç†å™¨][4] ä¸€æ ·ï¼Œä½ å¯ä»¥åœ¨å½“å‰å‘è¡Œç‰ˆä¸­ä½¿ç”¨ Nix åŒ…ç®¡ç†å™¨ã€‚

ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåšï¼Ÿå› ä¸ºæœ‰æ—¶ï¼Œä½ å¯èƒ½ä¼šå‘ç°ä»…ä»¥ Nix æ‰“åŒ…æ ¼å¼æä¾›çš„æ–°åº”ç”¨ã€‚è¿™ç§æƒ…å†µå¾ˆå°‘è§ï¼Œä½†æœ‰å¯èƒ½ã€‚

åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘å°†å¼•å¯¼ä½ å®Œæˆä»¥ä¸‹å†…å®¹ï¼š

   * å®‰è£… Nix åŒ…ç®¡ç†å™¨
   * æœç´¢å¹¶å®‰è£…åŒ…
   * å°è¯•/æµ‹è¯•è½¯ä»¶åŒ…è€Œä¸å®‰è£…å®ƒä»¬
   * æ›´æ–°åŒ…
   * åˆ é™¤åŒ…

### åœ¨å…¶ä»– Linux å‘è¡Œç‰ˆä¸Šå®‰è£… Nix åŒ…ç®¡ç†å™¨

Nix åŒ…ç®¡ç†å™¨æœ‰ä¸¤ç§å®‰è£…æ–¹å¼ï¼šå…¨å±€å®‰è£…å’Œæœ¬åœ°å®‰è£…ã€‚

> ğŸ“‹ å…¨å±€å®‰è£…æ„å‘³ç€ç³»ç»Ÿä¸Šçš„æ¯ä¸ªå¯ç”¨ç”¨æˆ·éƒ½å¯ä»¥è®¿é—® nix åŒ…ç®¡ç†å™¨ï¼Œè€Œæœ¬åœ°å®‰è£…ä»…é€‚ç”¨äºå½“å‰ç”¨æˆ·ã€‚[Nix å®˜æ–¹æ–‡æ¡£][5] å»ºè®®ä½ ä½¿ç”¨å…¨å±€å®‰è£…ã€‚

#### å…¨å±€å®‰è£…

å¦‚æœä½ æƒ³å…¨å±€å®‰è£… Nix åŒ…ç®¡ç†å™¨ï¼Œé‚£ä¹ˆï¼Œä½ éœ€è¦æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

````
sh <(curl -L https://nixos.org/nix/install) --daemon
````

æ‰§è¡Œä¸Šè¿°å‘½ä»¤åï¼Œéœ€è¦è¾“å…¥ `y` é”®å¹¶æŒ‰å›è½¦é”®ï¼š

![][6]

å®Œæˆåï¼Œå…³é—­å½“å‰ç»ˆç«¯ï¼Œå› ä¸ºå®ƒä¸ä¼šåœ¨å½“å‰ç»ˆç«¯ä¼šè¯ä¸Šè¿è¡Œã€‚

#### æœ¬åœ°å®‰è£…

å¦‚æœä½ æ›´å–œæ¬¢æœ¬åœ°å®‰è£…å¹¶ä¸”ä¸æƒ³æ¯æ¬¡éƒ½ä½¿ç”¨ `sudo`ï¼Œåˆ™æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

````
sh <(curl -L https://nixos.org/nix/install) --no-daemon
````

è¾“å…¥ `y` å¹¶åœ¨è¦æ±‚ç¡®è®¤æ—¶æŒ‰å›è½¦é”®ã€‚

å®Œæˆåï¼Œå…³é—­å½“å‰ç»ˆç«¯ä¼šè¯å¹¶å¯åŠ¨ä¸€ä¸ªæ–°ç»ˆç«¯ä¼šè¯ä»¥ä½¿ç”¨ Nix åŒ…ç®¡ç†å™¨ã€‚

### æœç´¢å¹¶å®‰è£…åŒ…

å®‰è£… Nix åŒ…ç®¡ç†å™¨åï¼Œä¸‹ä¸€æ­¥æ˜¯æœç´¢åŒ…ã€‚

é¦–å…ˆï¼Œ[è®¿é—® Nix æœç´¢çš„å®˜æ–¹é¡µé¢][7] å¹¶è¾“å…¥ä½ è¦å®‰è£…çš„è½¯ä»¶åŒ…çš„åç§°ã€‚

ä»ç»™å®šçš„æè¿°ä¸­ï¼Œä½ å¯ä»¥æ‰¾åˆ°æ‰€éœ€çš„è½¯ä»¶åŒ…ï¼Œç„¶åé€‰æ‹© `nix-env` è¿›è¡Œæ°¸ä¹…å®‰è£…ã€‚

åœ¨è¿™é‡Œï¼Œä½ å¯ä»¥æ·»åŠ ä¸€äº›é¢å¤–çš„å…³é”®å­—ä»¥è·å¾—æ›´å¥½çš„æœç´¢ç»“æœã€‚ä¾‹å¦‚ï¼Œåœ¨è¿™é‡Œï¼Œæˆ‘æœç´¢ â€œFirefox browserâ€ï¼š

![][8]

æˆ‘ä¸Šé¢æåˆ°çš„æœ€åä¸€æ­¥ï¼ˆâ€œå¤åˆ¶å‘½ä»¤â€ï¼‰ä»€ä¹ˆä¹Ÿä¸åšï¼Œåªæ˜¯ä¸ºä½ æä¾›äº†ä¸€ä¸ªç”¨äºå®‰è£…çš„å‘½ä»¤ã€‚

ç°åœ¨ï¼Œä½ æ‰€è¦åšçš„å°±æ˜¯åœ¨ç»ˆç«¯ä¸­æ‰§è¡Œè¯¥å‘½ä»¤ã€‚

å°±æˆ‘è€Œè¨€ï¼Œå®ƒç»™äº†æˆ‘ä»¥ä¸‹å‘½ä»¤æ¥å®‰è£… Firefoxï¼š

````
nix-env -iA nixpkgs.firefox
````

å®Œæˆåï¼Œä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åˆ—å‡ºå·²å®‰è£…çš„è½¯ä»¶åŒ…ï¼š

````
nix-env -q
````

![][9]

### ä½¿ç”¨åŒ…è€Œä¸å®‰è£…å®ƒä»¬

åˆ°ç›®å‰ä¸ºæ­¢ï¼Œè¿™æ˜¯ Nix åŒ…ç®¡ç†å™¨çš„æœ€ä½³åŠŸèƒ½ï¼Œå› ä¸ºä½ å¯ä»¥ä½¿ç”¨/æµ‹è¯•åŒ…ç”šè‡³ä¸ç”¨å®‰è£…å®ƒï¼

ä¸ºæ­¤ï¼Œä½ å¯ä»¥ä½¿ç”¨ Nix Shellï¼Œå®ƒå…è®¸ä½ å°†äº¤äº’å¼ Shell ä¸æŒ‡å®šçš„åŒ…ä¸€èµ·ä½¿ç”¨ï¼Œå…³é—­åï¼Œä½ å°†æ— æ³•å†è®¿é—®è¯¥åŒ…ã€‚

å¾ˆé…·ï¼Œå¯¹å§ï¼Ÿ

è¦ä½¿ç”¨ nix-shell è®¿é—®ä½ å–œæ¬¢çš„è½¯ä»¶åŒ…ï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è¯­æ³•ï¼š

````
nix-shell -p <package_name>
````

ä¾‹å¦‚ï¼Œæˆ‘æƒ³ä½¿ç”¨ä¸€æ¬¡ `neofetch`ï¼Œæ‰€ä»¥æˆ‘ä½¿ç”¨äº†ä»¥ä¸‹å‘½ä»¤ï¼š

````
nix-shell -p neofetch
````

![][10]

è¦é€€å‡º Shellï¼Œä½ æ‰€è¦åšçš„å°±æ˜¯æ‰§è¡Œ `exit` å‘½ä»¤ï¼š

````
exit
````

### ä½¿ç”¨ Nix åŒ…ç®¡ç†å™¨æ›´æ–°åŒ…

ä½¿ç”¨ Nix åŒ…ç®¡ç†å™¨æ›´æ–°åŒ…éå¸¸ç®€å•ã€‚

è¦æ›´æ–°è½¯ä»¶åŒ…ï¼Œé¦–å…ˆï¼Œä½ éœ€è¦ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ›´æ–°é¢‘é“ï¼š

````
nix-channel --update
````

æ¥ä¸‹æ¥ï¼Œä½ å¯ä»¥é€šè¿‡è¯•è¿è¡Œæ›´æ–°å‘½ä»¤æ¥åˆ—å‡ºè¿‡æ—¶çš„è½¯ä»¶åŒ…ï¼š

````
nix-env --upgrade --dry-run
````

![][11]

å°±æˆ‘è€Œè¨€ï¼ŒFirefox æµè§ˆå™¨å·²ç»è¿‡æ—¶ï¼Œéœ€è¦æ›´æ–°ï¼

è¦æ›´æ–°å•ä¸ªåŒ…ï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š

````
nix-env -u <Package_name>
````

å¦‚æœä½ æƒ³ä¸€æ¬¡æ›´æ–°æ‰€æœ‰è½¯ä»¶åŒ…ï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š

````
nix-env -u
````

### ä½¿ç”¨ Nix åŒ…ç®¡ç†å™¨åˆ é™¤åŒ…

è¦åˆ é™¤è½¯ä»¶åŒ…ï¼Œä½ åªéœ€æŒ‰ä»¥ä¸‹æ–¹å¼æ‰§è¡Œ `nix-env` å‘½ä»¤å³å¯ï¼š

````
nix-env --uninstall [package_name]
````

ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘æƒ³åˆ é™¤ Firefox æµè§ˆå™¨ï¼Œé‚£ä¹ˆï¼Œæˆ‘å°†ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š

````
nix-env --uninstall firefox
````

![][12]

### é€šè¿‡ NixOS é‡Šæ”¾å…¶å…¨éƒ¨æ½œåŠ›

å¦‚æœä½ å–œæ¬¢ Nix åŒ…ç®¡ç†å™¨èƒŒåçš„æƒ³æ³•ï¼Œè¯·ç›¸ä¿¡æˆ‘ï¼Œä½ ä¸€å®šä¼šå–œæ¬¢ [NixOS][13]ã€‚

ä»…ä½¿ç”¨ä¸€ä¸ªé…ç½®æ–‡ä»¶æ¥å¤åˆ¶æ•´ä¸ªç³»ç»Ÿå°±è¶³ä»¥è¯´æœæˆ‘åˆ‡æ¢åˆ° NixOSï¼Œä½†è¿˜æœ‰æ›´å¤šåŸå› ï¼š

æˆ‘å–œæ¬¢ NixOSã€‚ä»¥è‡³äºæˆ‘å†™äº†æ•´ä¸ªç³»åˆ—ï¼Œè¿™æ ·ä½ å°±ä¸å¿…é˜…è¯»æ–‡æ¡£ï¼ˆåŸºç¡€çŸ¥è¯†ï¼‰ï¼š

> **[NixOS ç³»åˆ—][1]**

æˆ‘å¸Œæœ›ä½ èƒ½åƒæˆ‘ä¸€æ ·å–œæ¬¢ä½¿ç”¨å®ƒã€‚

*ï¼ˆé¢˜å›¾ï¼šMJ/da586165-eadb-4ed7-9a0b-9c92903344d5ï¼‰*

--------------------------------------------------------------------------------

via: https://itsfoss.com/ubuntu-install-nix-package-manager/

ä½œè€…ï¼š[Sagar Sharma][a]
é€‰é¢˜ï¼š[lujun9972][b]
è¯‘è€…ï¼š[geekpi](https://github.com/geekpi)
æ ¡å¯¹ï¼š[wxy](https://github.com/wxy)

æœ¬æ–‡ç”± [LCTT](https://github.com/LCTT/TranslateProject) åŸåˆ›ç¼–è¯‘ï¼Œ[Linuxä¸­å›½](https://linux.cn/) è£èª‰æ¨å‡º

[a]: https://itsfoss.com/author/sagar/
[b]: https://github.com/lujun9972
[1]: https://linux.cn/article-15606-1.html
[2]: https://linux.cn/article-15624-1.html
[3]: https://linux.cn/article-14065-1.html
[4]: https://linux.cn/article-13938-1.html
[5]: https://nixos.org/learn
[6]: https://itsfoss.com/content/images/2023/10/Install-nix-package-manager-globally.png
[7]: https://search.nixos.org/packages
[8]: https://itsfoss.com/content/images/2023/10/Search-packages-to-install-using-the-Nix-package-manager.png
[9]: https://itsfoss.com/content/images/2023/10/List-installed-packages-using-the-nix-package-manager.png
[10]: https://itsfoss.com/content/images/2023/10/Use-packages-wihout-installing-them-using-the-nix-package-manager.png
[11]: https://itsfoss.com/content/images/2023/10/List-outdated-packages-using-the-nix-package-manager.png
[12]: https://itsfoss.com/content/images/2023/10/Remove-packages-using-the-nix-package-manager-1.png
[13]: https://nixos.org/
[0]: https://img.linux.net.cn/data/attachment/album/202310/22/082116ket5ed87padptmbw.jpg