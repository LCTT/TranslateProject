[#]: subject: "Bash Basics Series #9: Functions in Bash"
[#]: via: "https://itsfoss.com/bash-function/"
[#]: author: "Abhishek Prakash https://itsfoss.com/author/abhishek/"
[#]: collector: "lujun9972"
[#]: translator: "ChatGPT"
[#]: reviewer: "wxy"
[#]: publisher: "wxy"
[#]: url: "https://linux.cn/article-16116-1.html"

Bash åŸºç¡€çŸ¥è¯†ç³»åˆ— #9ï¼šBash ä¸­çš„å‡½æ•°
======

![][0]

> åœ¨ Bash åŸºç¡€ç³»åˆ—çš„æœ€åä¸€ç« ä¸­å­¦ä¹ å‡½æ•°çš„å…¨éƒ¨çŸ¥è¯†ã€‚

å¤§å¤šæ•°ç¼–ç¨‹è¯­è¨€éƒ½æ”¯æŒå‡½æ•°çš„æ¦‚å¿µã€‚

å‡½æ•°å¸®åŠ©ä½ é¿å…åœ¨åŒä¸€ä¸ªç¨‹åºä¸­åå¤ç¼–å†™åŒä¸€æ®µä»£ç ã€‚ä½ åªéœ€å°†ä»£ç å†™ä¸ºä¸€ä¸ªå‡½æ•°ï¼Œç„¶ååœ¨éœ€è¦ç‰¹å®šä»£ç ç‰‡æ®µçš„åœ°æ–¹ä½¿ç”¨è¿™ä¸ªå‡½æ•°ã€‚

åœ¨ Bash åŸºç¡€çŸ¥è¯†ç³»åˆ—çš„æœ€åä¸€ç« ä¸­ï¼Œä½ å°†å­¦ä¹ åœ¨ Bash è„šæœ¬ä¸­ä½¿ç”¨å‡½æ•°ã€‚

### Bash ä¸­çš„å‡½æ•°

ä¸‹é¢æ˜¯å£°æ˜ Bash å‡½æ•°çš„é€šç”¨è¯­æ³•ï¼š

```
function_name() {
    commands
}
```

åªæœ‰åœ¨ â€œè°ƒç”¨å‡½æ•°â€ çš„è„šæœ¬ä¸­ï¼Œå‡½æ•°å†…çš„å‘½ä»¤æ‰ä¼šè¢«æ‰§è¡Œã€‚

è¿™é‡Œæœ‰ä¸€ä¸ªä¼ªä»£ç æ¥æ¼”ç¤ºè¿™ä¸ªæƒ…å†µï¼š

```
function_name() {
    commands
}

some_other_commands

# å‡½æ•°è°ƒç”¨
function_name argument;
```

> ğŸš§ å‡½æ•°å®šä¹‰å¿…é¡»åœ¨ä½ è°ƒç”¨å‡½æ•°ä¹‹å‰ã€‚

è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªç®€å•çš„ä¾‹å­æ¥çœ‹çœ‹è¿™ä¸ªï¼š

```
#!/bin/bash

fun() {
    echo "This is a function"
}

echo "This is a script"
fun
```

å½“ä½ è¿è¡Œè„šæœ¬æ—¶ï¼Œä½ åº”è¯¥çœ‹åˆ°è¿™æ ·çš„è¾“å‡ºï¼š

```
This is a script
This is a function
```

å‡½æ•°æ˜¯åœ¨æ²¡æœ‰ä»»ä½•å‚æ•°çš„æƒ…å†µä¸‹è¢«è°ƒç”¨çš„ã€‚æ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹åœ¨ bash ä¸­å¦‚ä½•å¤„ç†å‡½æ•°çš„å‚æ•°ã€‚

### å‘å‡½æ•°ä¼ é€’å‚æ•°

å‘å‡½æ•°ä¼ é€’å‚æ•°å’Œå‘ Bash è„šæœ¬ä¼ é€’å‚æ•°æ˜¯ä¸€æ ·çš„ã€‚ä½ åœ¨è°ƒç”¨å‡½æ•°æ—¶ï¼Œå¯ä»¥åœ¨å‡½æ•°åæ—è¾¹å†™ä¸Šå‚æ•°ã€‚

```
function_name argument;
```

è®©æˆ‘ä»¬ç”¨ä¸€ä¸ªä¾‹å­æ¥çœ‹çœ‹è¿™ä¸ªï¼š

```
#!/bin/bash

sum() {
    sum=$(($1+$2))
    echo "The sum of $1 and $2 is: $sum"
}

echo "Let's use the sum function"
sum 1 5
```

å¦‚æœä½ è¿è¡Œè¿™ä¸ªè„šæœ¬ï¼Œä½ ä¼šçœ‹åˆ°ä»¥ä¸‹è¾“å‡ºï¼š

```
Let's use the sum function
The sum of 1 and 5 is: 6
```

è¯·è®°ä½ï¼Œä¼ é€’ç»™è„šæœ¬çš„å‚æ•°å’Œä¼ é€’ç»™å‡½æ•°çš„å‚æ•°æ˜¯ä¸åŒçš„ã€‚

åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘åœ¨è°ƒç”¨å‡½æ•°æ—¶äº¤æ¢äº†å‚æ•°ã€‚

```
#!/bin/bash

arg() {
    echo "1st argument to function is $1 and 2nd is $2"
}

echo "1st argument to script is $1 and 2nd is $2"
arg $2 $1
```

å½“ä½ è¿è¡Œè¿™ä¸ªè„šæœ¬æ—¶ï¼Œä½ ä¼šçœ‹åˆ°è¿™æ ·çš„äº¤æ¢ï¼š

```
$ ./function.sh abhi shek
1st argument to script is abhi and 2nd is shek
1st argument to function is shek and 2nd is abhi

```

### Bash ä¸­çš„é€’å½’å‡½æ•°

ä¸€ä¸ªé€’å½’å‡½æ•°ä¼šè°ƒç”¨å®ƒè‡ªå·±ã€‚è¿™å°±æ˜¯é€’å½’çš„å«ä¹‰ã€‚è¿™ä¸ªæ¢—å›¾å¯èƒ½ä¼šå¸®åŠ©ä½ ç†è§£å®ƒã€‚

![][1]

é€’å½’åŠŸèƒ½éå¸¸å¼ºå¤§ï¼Œå¯ä»¥å¸®åŠ©ä½ ç¼–å†™å¤æ‚çš„ç¨‹åºã€‚

è®©æˆ‘ä»¬ç”¨ä¸€ä¸ªè®¡ç®—é˜¶ä¹˜çš„æ ·æœ¬è„šæœ¬æ¥çœ‹çœ‹å®ƒçš„åº”ç”¨ã€‚å¦‚æœä½ å¿˜è®°äº†ï¼Œé˜¶ä¹˜çš„å®šä¹‰æ˜¯è¿™æ ·çš„ã€‚

n çš„é˜¶ä¹˜ï¼š

```
(n!) = 1 * 2 * 3 * 4 *...  * n
```

æ‰€ä»¥ï¼Œ5 çš„é˜¶ä¹˜æ˜¯ 1 * 2 * 3 * 4 * 5ï¼Œè®¡ç®—ç»“æœæ˜¯ 120ã€‚

è¿™æ˜¯æˆ‘ç”¨é€’å½’è®¡ç®—ç»™å®šæ•°å­—çš„é˜¶ä¹˜çš„è„šæœ¬ã€‚

```
#!/bin/bash

factorial() {

    if [ $1 -gt 1 ]; then
        echo $(( $1 * $(factorial $(( $1 -1 ))) ))
    else
        echo 1
    fi

}

echo -n "Factorial of $1 is: "
factorial $1
```

æ³¨æ„åˆ° `echo $(( $1 * $(factorial $(( $1 -1 ))) ))`ï¼Œä»£ç ä½¿ç”¨æ¯”è¾“å…¥å€¼å° 1 çš„å€¼è°ƒç”¨äº†å‡½æ•°è‡ªèº«ã€‚è¿™ä¸ªè¿‡ç¨‹ä¼šä¸€ç›´æŒç»­åˆ°å€¼å˜ä¸º 1ã€‚æ‰€ä»¥ï¼Œå¦‚æœä½ è¿è¡Œè„šæœ¬å¹¶è¾“å…¥å‚æ•° 5ï¼Œå®ƒæœ€ç»ˆä¼šè¿”å› 5 * 4 * 3 * 2 *1 çš„ç»“æœã€‚

```
$ ./factorial.sh 5
Factorial of 5 is: 120
```

éå¸¸å¥½ã€‚ç°åœ¨ï¼Œè®©æˆ‘ä»¬æ¥åšäº›ç»ƒä¹ å§ã€‚

### ğŸ‹ï¸ ç»ƒä¹ æ—¶é—´

ä»¥ä¸‹æ˜¯ä¸€äº›ç¤ºä¾‹ç¼–ç¨‹æŒ‘æˆ˜ï¼Œç”¨æ¥å¸®åŠ©ä½ å®è·µä½ æ‰€å­¦ã€‚

ç»ƒä¹  1ï¼šå†™ä¸€ä¸ª Bash è„šæœ¬ï¼Œä½¿ç”¨ä¸€ä¸ªåä¸º `is_even` çš„å‡½æ•°æ¥æ£€æŸ¥ç»™å®šçš„æ•°å­—æ˜¯å¦æ˜¯å¶æ•°ã€‚

ç»ƒä¹  2ï¼šç±»ä¼¼çš„ç»ƒä¹ ï¼Œä½ éœ€è¦ç¼–å†™ä¸€ä¸ªè„šæœ¬ï¼Œè¯¥è„šæœ¬å…·æœ‰ä¸€ä¸ªåä¸º `is_prime` çš„å‡½æ•°ï¼Œå¹¶æ£€æŸ¥ç»™å®šæ•°å­—æ˜¯å¦æ˜¯è´¨æ•°ã€‚å¦‚æœä½ è¿˜ä¸çŸ¥é“ï¼Œè´¨æ•°åªèƒ½è¢« 1 å’Œå®ƒè‡ªèº«æ•´é™¤ã€‚

ç»ƒä¹  3ï¼šç¼–å†™ä¸€ä¸ªç”Ÿæˆç»™å®šæ•°å­—çš„æ–æ³¢é‚£å¥‘åºåˆ—çš„è„šæœ¬ã€‚åºåˆ—ä» 1 å¼€å§‹ï¼Œè„šæœ¬å¿…é¡»æ¥å—å¤§äº 3 çš„æ•°å­—ã€‚

æ‰€ä»¥ï¼Œå¦‚æœä½ è¿è¡Œ `fibonacci.sh 5`ï¼Œå®ƒåº”è¯¥è¾“å‡º â€œ1 1 2 3 5â€ã€‚

å°±è¿™äº›äº†ï¼Œä¼™è®¡ä»¬ï¼è¿™æ˜¯ Bash åŸºç¡€ç³»åˆ—çš„æœ€åä¸€èŠ‚ã€‚å½“ç„¶ï¼Œä½ åœ¨è¿™é‡Œå­¦åˆ°çš„åªæ˜¯å†°å±±ä¸€è§’ï¼›Bash ç¼–ç¨‹è¿˜æœ‰æ›´å¤šéœ€è¦å­¦ä¹ çš„å†…å®¹ã€‚

ä½†æ˜¯ç°åœ¨ï¼Œä½ åº”è¯¥å¯¹ Bash Shell æœ‰äº†ä¸€å®šçš„ç†è§£ã€‚ä½ åº”è¯¥èƒ½å¤Ÿç†è§£å¤§å¤šæ•° Bash è„šæœ¬ï¼Œå¹¶èƒ½ç¼–å†™ç®€å•çš„è„šæœ¬ï¼Œå³ä¾¿ä¸èƒ½ç¼–å†™å¤æ‚çš„ã€‚

å¦‚æœä½ æƒ³æ·±å…¥å­¦ä¹ ï¼Œæ²¡æœ‰ä»€ä¹ˆæ¯”é˜…è¯» GNU Bash æ‰‹å†Œæ›´å¥½çš„äº†ã€‚

> **[GNU Bash æ‰‹å†Œ][2]**

ğŸ—¨ å¸Œæœ›ä½ å–œæ¬¢è¿™ä¸ª Bash åŸºç¡€çŸ¥è¯†ç³»åˆ—ã€‚æˆ‘ä»¬æ­£åœ¨åˆ›å»ºæ›´å¤šçš„æ•™ç¨‹ç³»åˆ—ï¼Œä»¥ç»™ä½ æä¾›æ›´æµç•…çš„å­¦ä¹ ä½“éªŒã€‚è¯·æä¾›ä½ çš„åé¦ˆï¼Œå¸®åŠ©æˆ‘ä»¬å¸®åŠ©å…¶ä»–äººå­¦ä¹  Linuxã€‚

*ï¼ˆé¢˜å›¾ï¼šMJ/f0022a50-85fe-40cc-afdd-285d976ec98cï¼‰*

--------------------------------------------------------------------------------

via: https://itsfoss.com/bash-function/

ä½œè€…ï¼š[Abhishek Prakash][a]
é€‰é¢˜ï¼š[lujun9972][b]
è¯‘è€…ï¼šChatGPT
æ ¡å¯¹ï¼š[wxy](https://github.com/wxy)

æœ¬æ–‡ç”± [LCTT](https://github.com/LCTT/TranslateProject) åŸåˆ›ç¼–è¯‘ï¼Œ[Linuxä¸­å›½](https://linux.cn/) è£èª‰æ¨å‡º

[a]: https://itsfoss.com/author/abhishek/
[b]: https://github.com/lujun9972
[1]: https://itsfoss.com/content/images/2023/08/recursion-meme.webp
[2]: https://www.gnu.org/software/bash/manual/
[0]: https://img.linux.net.cn/data/attachment/album/202308/22/114259tsxsfzyuxw3vf7k0.jpg